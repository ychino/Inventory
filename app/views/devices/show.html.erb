<% content_for(:page_header) do %>
  <%= "Device detail" %>
<% end %>
<% content_for :panel_heading do %><%= @device.name %><% end %>

<p>
  <strong>Name:</strong>
  <%= @device.name %>
</p>

<p>
  <strong>Description:</strong>
  <%= @device.description %>
</p>

<p>
  <strong>Kind:</strong>
  <%= Device::KINDS[@device.kind][0] %>
</p>

<% unless @devices.blank? %>
  <div>
    <div class="panel panel-default">
      <div class="panel-heading">
        Device Evolution
      </div>
      <div class="panel-body">
        <div id="device-evolution" style="height: 250px;"></div>
      </div>
    </div>
  </div>

  <% content_for(:extra_scripts) do %>
    <script type="text/javascript">
      $(document).ready(function (){
        new Morris.Area({
          element: 'device-evolution',
          data: <%= raw @devices.to_json %>,
          xkey: 'time',
          ykeys: ['value'],
          labels: ['Value'],
          pointSize: 2,
          resize: true
        });
      });
    </script>
  <% end %>
<% end %>
